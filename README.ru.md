# wa
wa (от workflow automation) — простой кроссплатформенный инструмент, созданный для автоматизации рутинных задач в процессе разработки. Например, его можно использовать для быстрого создания каркаса проекта из ранее созданного шаблона или выполнения сложной задачи в одну команду.
Цель wa — позволить делиться лучшими практиками при разработке ПО и упросить переиспользование кода в своих программных проектах. Файл манифеста в формате YAML содержит команды и соответствующие им действия, а заготовки файлов с исходным кодом хранятся как шаблоны. Манифест и шаблоны могут распространяться вместе исходным кодом вашего проекта.

## Установка

    $ pip install -r requirements.txt
    $ python3 setup.py install

или

    $ make install
        
Убедиться, что установка прошла успешно можно выполнив из консоли

    $ wa
    $ wa: workflow automation tool
    
## Использование
Рассмотрим пример манифста. В простейшем случае вы можете обойтись одним файлом `.wa` со следующим содержимым:
    
    start:
        project:
            - input projectname
            - mkdir ${projectname}

wa будет искать файл `.wa` в текущей директории. Если не найдет, то поднимется на уровень выше в дереве каталогов и продолжит искать `.wa` там и так далее пока не дойдет до корня файловой системы. При этом есть ограничение &mdash; файл `.wa` в вашей домашней директории будет проигнорирован, но если в остальных местах файл не будет найден wa будет использовать манифест-файл из домашней директории. В таком случае ваша текущая директория будет восприниматься как корнеь проекта.

Далее можно в той же директории выполнить:
    
    $ wa start project
    $ projectname = helloworld
    
Будет создана директория `helloworld`

## API
Вы можете использовать следующие команды:

 * `set <переменная> <значение>` устанавливает значение для переменной. После в любых командах можно использовать переменную как `${переменная}`. Имена переменных задаются с учётом регистра.
 * `input <имя переменной>` Запрашивает ввод у пользователя переменной
 * `cd <путь>` переходит по заданному пути.
 * `mkdir <имя папки> [<имя папки> [<имя папки>]]` создаёт папки с заданными именами.
 * `touch <имя файла> [<имя файла> [<имя файла>]]` создаёт файлы с заданными именами.
 * `rm <имя файла или папки> [<имя файла или папки> [<имя файла или папки>]]` удаляет файлы и папки с заданными именами.
 * `cp <источник> <цель>` копирует из источника в цель.
 * `cptpl <источник> <цель>` копирует из источника в цель с заменой `[[переменная]]` на значение переменной в именах файлов и папок и `<<<переменная>>>` на значение переменной в содержимом файлов.
 * `cptpljinja2 <источник> <цель>` копирует из источника в цель с заменой `[[переменная]]` на значение переменной в именах файлов и папок, а содержимое компилирует из шаблонов Jinja2, которые лежат в файлах источника.
 * `mv <источник> <цель>` перемещает файлы и папки из источника в цель.
 * `echo <соощение>` выводит сообщение на экран.
 * `exec <команда>` выполняет команду в командной строке операционной системы.
 * `py <имя файла> <функция>` функцию из файла в интерпретаторе Python.
 
Примечания: `mkdir |hello` означает создание папки `hello` в корне проекта. Вертикальная черта в начале аргумента означает корень проекта в других командах аналогично.

## Ошибки и проблемы
О любых ошибках, по любым вопросам и с любыми предложениями вы можете написать на почту v.manenkov (at) gmail.com или создать задачу в Github Issues https://github.com/char16t/wa/issues

## Лицензия
Исходный код распространяется под [лицензией MIT](LICENSE). 
